# Kafka
## Producer, Consumer, Broker
- Producer:向主题发布消息的客户端应用程序成为生产者 
- Consumer:订阅主题消息的客户端应用程序成为消费者 
- Broker:Kafka的服务端由被成为Broker的服务进程组成 

## Kafka消息架构
1. 主题层，每个主题可以配置M个分区， 而每个分区又可以配置N个副本。
2. 分区层，每个分区的N个副本中，只有一个能够充当领导者角色，对外提供服务；其他N-1个副本都是追随者副本，只是提供数据冗余之用。
3. 第三层是消息层，分区中包含若干条消息，每条消息的位移从0开始，依次递增。
4. 最后，客户端程序只能与分区的领导者副本交互。

## Kafka Broekr持久化数据的机制
- 使用消息日志来保存诗句，使用追加写的方式写入数据，可以避免缓慢的随机读写，即顺序读写。
- 使用日志段机制，回收日志所占的空间。